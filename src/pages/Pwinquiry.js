import React, { useState, useRef } from 'react';
import { useDispatch } from 'react-redux';
import { Link } from 'react-router-dom';
import Logo from '../components/Logo';
import { pwinquiry, pwinquiryInit } from '../actions';

function Pwinquiry() {
  const dispatch = useDispatch();
  const emailWarn = useRef();

  const [inputData, setInputData] = useState(null);
  const inputChangeHandler = (e) => {
    setInputData(e.target.value);
  };
  const submitHandler = (e) => {
    e.preventDefault();
    const re = '@gmail.com';
    if (!inputData.match(re)) {
      emailWarn.current.classList.add('show');
      return;
    }
    dispatch(pwinquiry(inputData));
  };

  return (
    <div className="pwinquiry">
      <div className="pwinquiry_logo">
        <Logo />
      </div>
      <div className="pwinquiry_warn">
        <svg
          className="pwinquiry_scrooge"
          xmlns="http://www.w3.org/2000/svg"
          width="152"
          height="196"
          viewBox="0 0 152 196"
          fill="none"
        >
          <path
            d="M71.5104 56.7C78.0104 56.7 83.5104 57.8 88.0104 60C92.6104 62.2 94.9104 65 94.9104 68.4C94.9104 69.9 94.5104 71.2 93.7104 72.3C93.0104 73.4 91.9104 73.95 90.4104 73.95C89.0104 73.95 85.9104 72.85 81.1104 70.65C76.3104 68.35 71.9104 67.2 67.9104 67.2C64.0104 67.2 59.9604 68.45 55.7604 70.95C51.5604 73.45 49.4604 76.5 49.4604 80.1C49.4604 85 52.0104 88.6 57.1104 90.9C60.9104 92.6 66.3604 94.15 73.4604 95.55C80.5604 96.85 86.3604 99.6 90.8604 103.8C95.3604 107.9 97.6104 114.15 97.6104 122.55C97.6104 135.35 93.7604 144.8 86.0604 150.9C81.7604 154.3 75.6604 156 67.7604 156C59.9604 156 52.1604 153.85 44.3604 149.55C39.2604 146.85 36.7104 144.15 36.7104 141.45C36.7104 140.45 37.1104 139.35 37.9104 138.15C38.8104 136.95 40.0104 135.95 41.5104 135.15C43.0104 134.35 44.3604 134.25 45.5604 134.85C46.8604 135.35 48.9104 136.3 51.7104 137.7C54.5104 139.1 56.5604 140.05 57.8604 140.55C62.0604 142.15 66.0104 142.95 69.7104 142.95C73.4104 142.95 76.9604 141.15 80.3604 137.55C83.8604 133.85 85.6104 129.35 85.6104 124.05C85.6104 117.05 82.1104 112.15 75.1104 109.35C71.7104 107.95 67.8604 106.9 63.5604 106.2C54.6604 104.6 47.9604 101.95 43.4604 98.25C38.9604 94.45 36.7104 88.75 36.7104 81.15C36.7104 73.55 39.9604 67.6 46.4604 63.3C52.9604 58.9 61.3104 56.7 71.5104 56.7Z"
            fill="#152253"
          />
          <path
            d="M88.0104 60L87.5711 60.8984L87.5789 60.9021L88.0104 60ZM93.7104 72.3L92.9016 71.7118L92.8834 71.7369L92.8667 71.7631L93.7104 72.3ZM81.1104 70.65L80.6782 71.5518L80.6859 71.5555L80.6937 71.5591L81.1104 70.65ZM55.7604 70.95L56.2718 71.8093L55.7604 70.95ZM57.1104 90.9L56.6992 91.8116L56.702 91.8128L57.1104 90.9ZM73.4604 95.55L73.2669 96.5312L73.2803 96.5336L73.4604 95.55ZM90.8604 103.8L90.178 104.531L90.1869 104.539L90.8604 103.8ZM86.0604 150.9L86.6806 151.684L86.6813 151.684L86.0604 150.9ZM44.3604 149.55L44.8431 148.674L44.8357 148.67L44.8282 148.666L44.3604 149.55ZM37.9104 138.15L37.1104 137.55L37.0937 137.572L37.0783 137.595L37.9104 138.15ZM41.5104 135.15L41.0398 134.268L41.5104 135.15ZM45.5604 134.85L45.1131 135.744L45.1563 135.766L45.2014 135.783L45.5604 134.85ZM51.7104 137.7L52.1576 136.806L51.7104 137.7ZM57.8604 140.55L57.5014 141.483L57.5044 141.484L57.8604 140.55ZM80.3604 137.55L79.6339 136.863L79.6333 136.863L80.3604 137.55ZM75.1104 109.35L74.7296 110.275L74.739 110.278L75.1104 109.35ZM63.5604 106.2L63.3834 107.184L63.3915 107.186L63.3997 107.187L63.5604 106.2ZM43.4604 98.25L42.8151 99.0141L42.8252 99.0224L43.4604 98.25ZM46.4604 63.3L47.0121 64.1341L47.0209 64.1281L46.4604 63.3ZM71.5104 57.7C77.9018 57.7 83.2424 58.7821 87.5711 60.8984L88.4496 59.1016C83.7784 56.8179 78.1189 55.7 71.5104 55.7V57.7ZM87.5789 60.9021C92.0269 63.0294 93.9104 65.5625 93.9104 68.4H95.9104C95.9104 64.4375 93.1938 61.3706 88.4418 59.0979L87.5789 60.9021ZM93.9104 68.4C93.9104 69.7115 93.5645 70.8003 92.9016 71.7118L94.5191 72.8882C95.4562 71.5997 95.9104 70.0885 95.9104 68.4H93.9104ZM92.8667 71.7631C92.3805 72.5271 91.6289 72.95 90.4104 72.95V74.95C92.1918 74.95 93.6402 74.2728 94.554 72.8369L92.8667 71.7631ZM90.4104 72.95C89.8991 72.95 88.9184 72.7321 87.3698 72.1826C85.8591 71.6465 83.9141 70.835 81.527 69.7409L80.6937 71.5591C83.1066 72.665 85.1116 73.5035 86.7009 74.0674C88.2523 74.6179 89.5216 74.95 90.4104 74.95V72.95ZM81.5425 69.7482C76.6501 67.4039 72.1009 66.2 67.9104 66.2V68.2C71.7199 68.2 75.9706 69.2961 80.6782 71.5518L81.5425 69.7482ZM67.9104 66.2C63.79 66.2 59.5648 67.5217 55.2489 70.0907L56.2718 71.8093C60.3559 69.3783 64.2307 68.2 67.9104 68.2V66.2ZM55.2489 70.0907C50.8678 72.6985 48.4604 76.0257 48.4604 80.1H50.4604C50.4604 76.9743 52.2529 74.2015 56.2718 71.8093L55.2489 70.0907ZM48.4604 80.1C48.4604 82.7331 49.149 85.0655 50.5568 87.053C51.9588 89.0323 54.0298 90.6077 56.6992 91.8116L57.5215 89.9884C55.0909 88.8923 53.3369 87.5177 52.1889 85.897C51.0467 84.2845 50.4604 82.3669 50.4604 80.1H48.4604ZM56.702 91.8128C60.6032 93.5581 66.1386 95.1255 73.2669 96.5311L73.6538 94.5689C66.5821 93.1745 61.2175 91.6419 57.5187 89.9872L56.702 91.8128ZM73.2803 96.5336C80.2252 97.8053 85.8405 100.483 90.178 104.531L91.5427 103.069C86.8802 98.7173 80.8955 95.8947 73.6405 94.5663L73.2803 96.5336ZM90.1869 104.539C94.4092 108.386 96.6104 114.321 96.6104 122.55H98.6104C98.6104 113.979 96.3116 107.414 91.5338 103.061L90.1869 104.539ZM96.6104 122.55C96.6104 135.145 92.8311 144.26 85.4394 150.116L86.6813 151.684C94.6896 145.34 98.6104 135.555 98.6104 122.55H96.6104ZM85.4401 150.116C81.3799 153.326 75.5317 155 67.7604 155V157C75.789 157 82.1409 155.274 86.6806 151.684L85.4401 150.116ZM67.7604 155C60.1519 155 52.5165 152.904 44.8431 148.674L43.8776 150.426C51.8042 154.796 59.7688 157 67.7604 157V155ZM44.8282 148.666C42.3275 147.342 40.5203 146.053 39.3499 144.813C38.1835 143.578 37.7104 142.462 37.7104 141.45H35.7104C35.7104 143.138 36.5122 144.722 37.8958 146.187C39.2754 147.647 41.2932 149.058 43.8925 150.434L44.8282 148.666ZM37.7104 141.45C37.7104 140.717 38.0058 139.81 38.7424 138.705L37.0783 137.595C36.2149 138.89 35.7104 140.183 35.7104 141.45H37.7104ZM38.7104 138.75C39.5115 137.682 40.5928 136.773 41.9809 136.032L41.0398 134.268C39.4279 135.127 38.1092 136.218 37.1104 137.55L38.7104 138.75ZM41.9809 136.032C43.2802 135.339 44.2797 135.328 45.1131 135.744L46.0076 133.956C44.441 133.172 42.7405 133.361 41.0398 134.268L41.9809 136.032ZM45.2014 135.783C46.4527 136.265 48.4655 137.196 51.2631 138.594L52.1576 136.806C49.3552 135.404 47.268 134.435 45.9193 133.917L45.2014 135.783ZM51.2631 138.594C54.0655 139.996 56.1527 140.965 57.5014 141.483L58.2193 139.617C56.968 139.135 54.9552 138.204 52.1576 136.806L51.2631 138.594ZM57.5044 141.484C61.7944 143.119 65.8657 143.95 69.7104 143.95V141.95C66.155 141.95 62.3264 141.181 58.2163 139.616L57.5044 141.484ZM69.7104 143.95C73.7693 143.95 77.565 141.966 81.0874 138.237L79.6333 136.863C76.3557 140.334 73.0514 141.95 69.7104 141.95V143.95ZM81.0868 138.237C84.7702 134.343 86.6104 129.594 86.6104 124.05H84.6104C84.6104 129.106 82.9505 133.357 79.6339 136.863L81.0868 138.237ZM86.6104 124.05C86.6104 120.377 85.6891 117.19 83.7991 114.544C81.9129 111.903 79.1147 109.875 75.4817 108.422L74.739 110.278C78.106 111.625 80.5578 113.447 82.1716 115.706C83.7816 117.96 84.6104 120.723 84.6104 124.05H86.6104ZM75.4911 108.425C72.0088 106.991 68.0831 105.923 63.721 105.213L63.3997 107.187C67.6376 107.877 71.4119 108.909 74.7296 110.275L75.4911 108.425ZM63.7373 105.216C54.9209 103.631 48.4099 101.025 44.0955 97.4776L42.8252 99.0224C47.5108 102.875 54.3998 105.569 63.3834 107.184L63.7373 105.216ZM44.1055 97.486C39.8924 93.9282 37.7104 88.5474 37.7104 81.15H35.7104C35.7104 88.9526 38.0283 94.9718 42.8152 99.014L44.1055 97.486ZM37.7104 81.15C37.7104 73.8958 40.7834 68.2545 47.0121 64.134L45.9086 62.466C39.1373 66.9455 35.7104 73.2042 35.7104 81.15H37.7104ZM47.0209 64.1281C53.3123 59.8693 61.4509 57.7 71.5104 57.7V55.7C61.1698 55.7 52.6084 57.9307 45.8998 62.4719L47.0209 64.1281Z"
            fill="#152253"
          />
          <path
            d="M64.3829 44.2243C64.3829 53.085 58.7447 59.4486 52.6915 59.4486C46.6382 59.4486 41 53.085 41 44.2243C41 35.3636 46.6382 29 52.6915 29C58.7447 29 64.3829 35.3636 64.3829 44.2243Z"
            fill="#F1F5FF"
            stroke="#152253"
            stroke-width="4"
          />
          <path
            d="M87.3492 44.2243C87.3492 53.085 81.711 59.4486 75.6578 59.4486C69.6045 59.4486 63.9663 53.085 63.9663 44.2243C63.9663 35.3636 69.6045 29 75.6578 29C81.711 29 87.3492 35.3636 87.3492 44.2243Z"
            fill="#F1F5FF"
            stroke="#152253"
            stroke-width="4"
          />
          <path
            d="M62.3494 43.771C62.3494 47.7629 59.1996 50.9766 55.3412 50.9766C51.4828 50.9766 48.333 47.7629 48.333 43.771C48.333 39.7792 51.4828 36.5654 55.3412 36.5654C59.1996 36.5654 62.3494 39.7792 62.3494 43.771Z"
            fill="#152253"
            stroke="#152253"
          />
          <path
            d="M86.1991 43.771C86.1991 47.7629 83.0492 50.9766 79.1908 50.9766C75.3325 50.9766 72.1826 47.7629 72.1826 43.771C72.1826 39.7792 75.3325 36.5654 79.1908 36.5654C83.0492 36.5654 86.1991 39.7792 86.1991 43.771Z"
            fill="#152253"
            stroke="#152253"
          />
          <path
            d="M92.5596 98.2804C101.393 87.4812 112.902 79.3223 119.501 74.3363C123.034 71.6667 130.984 66.6307 136.092 64.9498C137.575 64.1098 138.044 63.3511 138.044 61.6787C138.044 58.9637 137.48 56.4822 139.376 54.3923C141.598 51.9425 144.484 48.8062 147.325 47.1399C149.387 46.6867 150.153 48.2218 149.975 49.4064C149.784 50.6834 148.382 51.2194 148.382 51.2194C146.884 52.126 146.442 52.5793 145.117 53.4858C143.792 54.3923 141.95 55.7522 142.495 55.7522C141.361 55.7522 144.229 55.5793 145.117 55.2989C146.005 55.0185 147.549 55.6079 148.382 56.6098C149.588 58.0608 148.713 59.5326 147.549 60.2849C146.11 61.2147 142.939 61.6787 141.318 61.6787C138.776 61.6787 148.65 60.9259 148.65 64.3643C148.65 67.8028 144.675 68.4438 141.95 67.9905C140.939 67.8224 139.396 67.5587 138.492 66.6307"
            stroke="#152253"
            stroke-width="3"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <path
            d="M34.8953 90.6543C27.7049 90.6543 21.4507 91.1119 17.0214 93.3739C14.3587 94.7337 9.5259 96.5468 5.55102 101.533C3.34279 104.706 1.81745 107.965 2.01763 110.598C2.3966 115.584 6.51227 116.955 8.64258 117.397C11.7602 118.045 18.5504 118.92 23.868 119.697C23.868 119.697 28.6659 120.477 27.7049 120.945C26.9798 121.299 23.0098 121.593 24.5024 122.947C26.6711 124.915 31.2957 126.009 34.2307 126.009C35.4094 126.009 35.2216 124.051 34.8953 123.242C33.9503 120.898 29.9538 119.812 27.9466 118.59"
            stroke="#152253"
            stroke-width="3"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <path
            d="M56.3418 144.14C54.7112 151.806 53.9092 159.544 52.5372 168.234C51.9937 171.676 51.8176 175.352 51.4501 178.638C50.8377 184.113 50.4023 187.538 47.6455 186.304C42.8718 184.166 34.7032 183.143 35.1605 190.976C35.3141 193.607 50.8377 196.585 50.8377 190.099"
            stroke="#152253"
            stroke-width="3"
            stroke-linecap="round"
          />
          <path
            d="M73.1249 143.233C74.6875 150.9 75.4561 158.637 76.771 167.327C77.2919 170.769 77.4606 174.445 77.8127 177.731C78.3996 183.207 78.8747 188.435 81.5166 187.201C85.4915 184.481 93.8619 183.114 93.4236 190.947C93.2764 193.578 78.3996 196.556 78.3996 190.069"
            stroke="#152253"
            stroke-width="3"
            stroke-linecap="round"
          />
        </svg>
        <span>
          이메일을 입력하시면 작성하신 이메일로 임시 비밀번호를 보내드려요
          <br />
          <br />
          🚨비밀번호 찾기는 현재로서는 Gmail만 가능합니다. 😢
          <br />
          <br />
          🚨소셜 로그인으로 가입한 이메일은 비밀번호 찾기를 할 수 없습니다!
        </span>
      </div>
      <form className="pwinquiry_form">
        <label htmlFor="email">이메일</label>
        <input id="email" type="email" onChange={inputChangeHandler} />
        <button className="submit" onClick={submitHandler}>
          임시 비밀번호 전송
        </button>
        <Link to="/">홈으로 돌아가기</Link>
      </form>
      {/* 완료 */}
      <div className="modal">
        <h3>임시 비밀번호 전송 완료</h3>
        <p>
          메일이 도착하지 않으면
          <br />
          스팸 함을 확인해주세용!
        </p>
        <button
          className="submit"
          onClick={(e) => {
            e.target.parentNode.classList.remove('show');
            dispatch(pwinquiryInit());
          }}
        >
          확인
        </button>
      </div>
      {/* 없는 이메일 */}
      <div className="modal">
        <h3>없는 이메일 입니다</h3>
        <p>
          가입되어 있지 않은 이메일입니다
          <br />
          다시 입력해주세용!
        </p>
        <button
          className="submit"
          onClick={(e) => {
            e.target.parentNode.classList.remove('show');
            dispatch(pwinquiryInit());
          }}
        >
          확인
        </button>
      </div>
      {/* 지메일 아님 */}
      <div className="modal" ref={emailWarn}>
        <h3>경고</h3>
        <p>
          현재는 Gmail 주소만 비밀번호 찾기를
          <br />
          이용할 수 있습니다🤦‍♀️
        </p>
        <button
          className="submit"
          onClick={(e) => {
            e.target.parentNode.classList.remove('show');
            dispatch(pwinquiryInit());
          }}
        >
          확인
        </button>
      </div>
    </div>
  );
}

export default Pwinquiry;
